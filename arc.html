
<canvas id="canvas" width="400" height="400" style="border:1px solid;">
</canvas>
<div>
  <label>Position (x, y):</label>
  <input type="text" id="x" value="200"/>
  <input type="text" id="y" value="200"/><br/>
  <label>Radius:</label>
  <input type="text" id="r" value="125"/><br/>
  <label>Arc start/end (degrees):</label>
  <input type="text" id="s" value="30"/>
  <input type="text" id="e" value="165"/><br/>
  
  <button onClick="doDrawArc();">Draw</button>
  <button onClick="doClear();">Clear</button>

</div>

<script>
function myArc(ctx, cx, cy, r, start, end) {
    function dot(x, y) {
        // we're using 2x2 squares for dots.
        ctx.fillRect(cx + x, cx - y, 4, 4);
    }

    // A dot in the center,
    dot(0, 0);

    // Calculate which quadrents are active.
    // Start and end are ssumed to be between 0 and 2pi
    let startq = Math.floor(start / (Math.PI / 4));
    let endq = Math.floor(end / (Math.PI / 4));
    let q = [];
    console.log(`startq: ${startq}, endq: ${endq}`);
    if (start < end) {
        // The arc does not go through 0.
        for (let i = 0; i < 8; i++) {
            q[i] = startq < i && endq > i;
        }
    } else {
        // The arc goes through 0.
        for (let i = 0; i < 8; i++) {
            q[i] = startq < i || endq > i;
        }
    }
    console.log(`quadrents ${q}`);

    // The normalised (to within a quadrent) x values of where the arc
    // starts and ends.
    let sx = Math.round(Math.sin(start % (Math.PI/4)) * r);
    let ex = Math.round(Math.sin(end % (Math.PI/4)) * r);
    console.log(`sx: ${sx}, ex: ${ex}`);

    function circDot(q, x, y) {
        // Quadrent 0.
        if (q[0]) {
            dot( x,  y);
        }
        else if (startq == 0 && endq == 0) {
            if (x >= sx && x < ex) {
                ctx.fillStyle = "pink";
                dot( x,  y);
                ctx.fillStyle = "green";
            }
        } else if (startq == 0) {
            if (x >= sx) {
              ctx.fillStyle = "red";
              dot( x,  y);
              ctx.fillStyle = "green";
            }
        } else if (endq == 0) {
            if (x < ex) {
                ctx.fillStyle = "blue";
                dot( x,  y);
                ctx.fillStyle = "green";
            }
        }

        if (q[1]) dot( y,  x);
        if (q[2]) dot( y, -x);
        if (q[3]) dot( x, -y);
        if (endq == 3 && x > ex) {
            ctx.fillStyle = "blue";
            dot( x, -y);
            ctx.fillStyle = "green";
        }

        if (q[4]) dot(-x, -y);
        if (q[5]) dot(-y, -x);
        if (q[6]) dot(-y,  x);
        if (q[7]) dot(-x,  y);
    }

    let x = 0;
    let y = r;
    let d = 3 - 2 * r;
    circDot(q, x, y);
    while (y >= x) {
        x++;
        if (d > 0) {
            y--;
            d = d + 4 * (x - y) + 10;
        } else {
            d = d + 4 * x + 6;
        }
        circDot(q, x, y);
    }
}

let canvas = document.getElementById("canvas");
let context = canvas.getContext("2d");
context.fillStyle = "green";
myArc(context, 200, 200, 178, Math.PI/6, Math.PI*5/6 );

function doDrawArc() {
    let x = Number(document.getElementById("x").value);
    let y = Number(document.getElementById("x").value);
    let r = Number(document.getElementById("r").value);
    let s = Number(document.getElementById("s").value);
    let e = Number(document.getElementById("e").value);
    myArc(context, x, y, r, s * Math.PI / 180, e * Math.PI / 180);
}

function doClear() {
  context.clearRect(0, 0, canvas.width, canvas.height);
}

</script>
